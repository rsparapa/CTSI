1                                                          The SAS System                              09:52 Saturday, March 8, 2025

NOTE: Copyright (c) 2023 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M8) 
      Licensed to MEDICAL COLLEGE OF WISCONSIN - T&R SFA, Site 70183647.
NOTE: This session is executing on the Linux 3.10.0-514.10.2.el7.x86_64 (LIN X64) platform.



NOTE: Analytical products:
      
      SAS/STAT 15.3
      SAS/ETS 15.3
      SAS/OR 15.3
      SAS/IML 15.3
      SAS/QC 15.3

NOTE: Additional host information:

 Linux LIN X64 3.10.0-514.10.2.el7.x86_64 #1 SMP Fri Mar 3 00:04:05 UTC 2017 x86_64 CentOS Linux release 7.9.2009 (Core) 

NOTE: SAS initialization used:
      real time           0.05 seconds
      cpu time            0.03 seconds
      

NOTE: AUTOEXEC processing beginning; file is /home/rsparapa/git/CTSI/BERD/autoexec.sas.

NOTE: Libref CRDW was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /data/shared/AI/libname/crdw
NOTE: You have called the macro _IFELSE, 2008-07-15.
NOTE: Copyright (c) 2006-2008 Rodney Sparapani
 
NOTE: You have called the macro _EXIST, 2012-07-11.
NOTE: Copyright (c) 2001-2012 Rodney Sparapani
 
NOTE: You have called the macro _FN, 2024-08-03.
NOTE: Copyright (c) 2001-2024 Rodney Sparapani
 
MPRINT(_FN):   filename fn "/home/rsparapa/git/CTSI/BERD/snippet15.sas";
MPRINT(_FN):   filename fn;
NOTE: Fileref FN has been deassigned.
NOTE: You have called the macro _TAIL, 2004-03-30.
NOTE: Copyright (c) 2001-2004 Rodney Sparapani
 
NOTE: You have called the macro _DIRCHAR, 2007-07-24.
NOTE: Copyright (c) 2004-2007 Rodney Sparapani
 
NOTE: You have called the macro _UNWIND, 2004-11-23.
NOTE: Copyright (c) 2001-2004 Rodney Sparapani
 
NOTE: You have called the macro _COUNT, 2022-06-07.
NOTE: Copyright (c) 2001-2022 Rodney Sparapani
2                              The SAS System  09:52 Saturday, March 8, 2025

 
NOTE: You have called the macro _SUBSTR, 2004-03-29.
NOTE: Copyright (c) 2001-2004 Rodney Sparapani
 
NOTE: You have called the macro _HEAD, 2004-03-30.
NOTE: Copyright (c) 2001-2004 Rodney Sparapani
 
FN=snippet15.sas
FNROOT=snippet15
FNPATH=/home/rsparapa/git/CTSI/BERD/snippet15.sas
FNDIR=/home/rsparapa/git/CTSI/BERD/
FNTEXT=snippet15.txt
FNHTML=snippet15.html
FNTEX=snippet15.tex
FNPDF=snippet15.pdf
NOTE: You have called the macro _LJ, 2004-03-30.
NOTE: Copyright (c) 2001-2004 Rodney Sparapani
 
NOTE: You have called the macro _PAD, 2004-03-30.
NOTE: Copyright (c) 2001-2004 Rodney Sparapani
 
MPRINT(_LJ):   "/home/rsparapa/git/CTSI/BERD/snippet15.sas"
MPRINT(_PAD):   
"202020202020202020202020202020202020202020202020202020202020202020202020202
0202020202020202020202020202020202020202020202020202020202020202020202020202
020202020"X
 
*** SGANNO macros are now available ***
     NOTE: SGANNO macros (except SGANNO_HELP) should be used within data 
step.
 
 
 Following macros are available 
 
     %SGANNO_HELP 
     %SGARROW 
     %SGIMAGE 
     %SGLINE 
     %SGOVAL 
     %SGPOLYCONT 
     %SGPOLYGON 
     %SGPOLYLINE 
     %SGRECTANGLE 
     %SGTEXT 
     %SGTEXTCONT 
 
 Enter %SGANNO_HELP(macroname) for details on each SGANNO macro,
    or %SGANNO_HELP(ALL) for details on all SGANNO macros.
 
MPRINT(SGANNO):  ;
 
*** ANNOTATE macros are now available ***
3                              The SAS System  09:52 Saturday, March 8, 2025

 
 For further information on ANNOTATE macros, enter,
    %HELPANO(macroname), (for specific macros)
    %HELPANO(ALL), (for information on all macros)
 or %HELPANO (for a list of macro names)
 
NOTE: Libref CWD was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /home/rsparapa/git/CTSI/BERD
NOTE: Libref PWD refers to the same physical library as CWD.
NOTE: Libref PWD was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /home/rsparapa/git/CTSI/BERD

NOTE: AUTOEXEC processing completed.

1          
2          %_dblib(data=db.fh_hb_mar_table_jupyter, var=pharm_subclass);
NOTE: You have called the macro _DBLIB, 2025-02-28.
NOTE: Copyright (c) 2025 Rodney Sparapani
 
NOTE: You have called the macro _REQUIRE, 2004-03-29.
NOTE: Copyright (c) 2001-2004 Rodney Sparapani
 
MPRINT(_DBLIB):  ;
NOTE: You have called the macro _LIB, 2007-08-01.
NOTE: Copyright (c) 2001-2007 Rodney Sparapani
 
NOTE: You have called the macro _DATA, 2007-07-31.
NOTE: Copyright (c) 2001-2007 Rodney Sparapani
 
MPRINT(_DBLIB):   proc sql;
MPRINT(_DBLIB):   connect to postgres as crdw (user=rsparapani 
password=&password server="garth.ctsi.mcw.edu" 
database="fh_jupyter_hub_hbdb");
MPRINT(_DBLIB):   create table schema as select * from connection to crdw 
(select * from information_schema.columns where table_schema = 'public') 
where table_name="fh_hb_mar_table_jupyter";
NOTE: Table WORK.SCHEMA created, with 37 rows and 44 columns.

MPRINT(_DBLIB):   disconnect from crdw;
MPRINT(_DBLIB):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.16 seconds
      cpu time            0.07 seconds
      

MPRINT(_DBLIB):   data dbdates;
MPRINT(_DBLIB):   set schema;
MPRINT(_DBLIB):   where data_type=:'time';
MPRINT(_DBLIB):   run;

4                              The SAS System  09:52 Saturday, March 8, 2025

NOTE: There were 2 observations read from the data set WORK.SCHEMA.
      WHERE data_type=:'time';
NOTE: The data set WORK.DBDATES has 2 observations and 44 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

NOTE: You have called the macro _LEVEL, 2011-09-01.
NOTE: Copyright (c) 2002-2011 Rodney Sparapani
 
NOTE: You have called the macro _NOBS, 2007-07-11.
NOTE: Copyright (c) 2001-2007 Rodney Sparapani
 
NOTE: You have called the macro _DSEXIST, 2007-08-01.
NOTE: Copyright (c) 2001-2007 Rodney Sparapani
 
NOTE: You have called the macro _SUFFIX, 2004-10-26.
NOTE: Copyright (c) 2001-2004 Rodney Sparapani
 
NOTE: You have called the macro _VERSION, 2006-02-15.
NOTE: Copyright (c) 2001-2006 Rodney Sparapani
 
NOTE: You have called the macro _DIR, 2004-11-23.
NOTE: Copyright (c) 2004 Rodney Sparapani
 
NOTE: You have called the macro _FILE, 2004-11-23.
NOTE: Copyright (c) 2004 Rodney Sparapani
 
NOTE: You have called the macro _OPTION, 2004-03-29.
NOTE: Copyright (c) 2001-2004 Rodney Sparapani
 
MPRINT(_DBLIB):   data dblen;
MPRINT(_DBLIB):   set schema;
MPRINT(_DBLIB):   where data_type in:('character', 'text');
MPRINT(_DBLIB):   column_name=lowcase(column_name);
MPRINT(_DBLIB):   run;

NOTE: There were 30 observations read from the data set WORK.SCHEMA.
      WHERE data_type in: ('character', 'text');
NOTE: The data set WORK.DBLEN has 30 observations and 44 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data patient_hash;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.PATIENT_HASH has 1 observations and 1 variables.
5                              The SAS System  09:52 Saturday, March 8, 2025

NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(_DBLIB):   data encounter_hash;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ENCOUNTER_HASH has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data order_med_id_hash;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ORDER_MED_ID_HASH has 1 observations and 1 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data medication_name;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.MEDICATION_NAME has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data mar_action;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.MAR_ACTION has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data mar_dose;
MPRINT(_DBLIB):   len=16;
6                              The SAS System  09:52 Saturday, March 8, 2025

MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.MAR_DOSE has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(_DBLIB):   data mar_dose_unit;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.MAR_DOSE_UNIT has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(_DBLIB):   data mar_route;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.MAR_ROUTE has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data pharm_class;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.PHARM_CLASS has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data pharm_subclass;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.PHARM_SUBCLASS has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
7                              The SAS System  09:52 Saturday, March 8, 2025


MPRINT(_DBLIB):   data ingredient_rxcui;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.INGREDIENT_RXCUI has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data ingredient_rxcui_name;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.INGREDIENT_RXCUI_NAME has 1 observations and 1 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data specific_rxcui;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.SPECIFIC_RXCUI has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data specific_rxcui_type;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.SPECIFIC_RXCUI_TYPE has 1 observations and 1 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(_DBLIB):   data gpi;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

8                              The SAS System  09:52 Saturday, March 8, 2025

NOTE: The data set WORK.GPI has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data order_class;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ORDER_CLASS has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data ordering_mode;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ORDERING_MODE has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data order_status;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ORDER_STATUS has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data freq_id;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.FREQ_ID has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(_DBLIB):   data frequency;
MPRINT(_DBLIB):   len=16;
9                              The SAS System  09:52 Saturday, March 8, 2025

MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.FREQUENCY has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data order_dose;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ORDER_DOSE has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data order_dose_unit;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ORDER_DOSE_UNIT has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data quantity;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.QUANTITY has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data part_of_mix_yn;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.PART_OF_MIX_YN has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
10                             The SAS System  09:52 Saturday, March 8, 2025


MPRINT(_DBLIB):   data mix_ingredient_type;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.MIX_INGREDIENT_TYPE has 1 observations and 1 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(_DBLIB):   data mix_parent_medication_name;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.MIX_PARENT_MEDICATION_NAME has 1 observations and 1 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data auth_prov_id;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.AUTH_PROV_ID has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data auth_provider;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.AUTH_PROVIDER has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data auth_provider_type;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

11                             The SAS System  09:52 Saturday, March 8, 2025

NOTE: The data set WORK.AUTH_PROVIDER_TYPE has 1 observations and 1 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data auth_prov_title;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.AUTH_PROV_TITLE has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   proc sql;
MPRINT(_DBLIB):   connect to postgres as crdw (user=rsparapani 
password=&password server="garth.ctsi.mcw.edu" 
database="fh_jupyter_hub_hbdb");
NOTE: You have called the macro _INDEXW, 2009-11-19.
NOTE: Copyright (c) 2009 Rodney Sparapani
 
MPRINT(_DBLIB):   create table pharm_subclass as select * from connection 
to crdw (select max(length(pharm_subclass)) as len from 
fh_hb_mar_table_jupyter);
NOTE: Table WORK.PHARM_SUBCLASS created, with 1 rows and 1 columns.

MPRINT(_DBLIB):   disconnect from crdw;
MPRINT(_DBLIB):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           27.99 seconds
      cpu time            0.03 seconds
      

MPRINT(_DBLIB):   data _null_;
MPRINT(_DBLIB):   set patient_hash encounter_hash order_med_id_hash 
medication_name mar_action mar_dose mar_dose_unit mar_route pharm_class 
pharm_subclass ingredient_rxcui ingredient_rxcui_name specific_rxcui 
specific_rxcui_type gpi order_class ordering_mode order_status freq_id 
frequency order_dose order_dose_unit quantity part_of_mix_yn 
mix_ingredient_type mix_parent_medication_name auth_prov_id auth_provider 
auth_provider_type auth_prov_title end=last;
MPRINT(_DBLIB):   retain dbmax_text 16;
MPRINT(_DBLIB):   dbmax_text=max(dbmax_text, len);
MPRINT(_DBLIB):   if last then call symput("dbmax_text", trim(dbmax_text));
MPRINT(_DBLIB):   run;

NOTE: Numeric values have been converted to character 
      values at the places given by: (Line):(Column).
12                             The SAS System  09:52 Saturday, March 8, 2025

      2:191   
NOTE: There were 1 observations read from the data set WORK.PATIENT_HASH.
NOTE: There were 1 observations read from the data set WORK.ENCOUNTER_HASH.
NOTE: There were 1 observations read from the data set 
      WORK.ORDER_MED_ID_HASH.
NOTE: There were 1 observations read from the data set WORK.MEDICATION_NAME.
NOTE: There were 1 observations read from the data set WORK.MAR_ACTION.
NOTE: There were 1 observations read from the data set WORK.MAR_DOSE.
NOTE: There were 1 observations read from the data set WORK.MAR_DOSE_UNIT.
NOTE: There were 1 observations read from the data set WORK.MAR_ROUTE.
NOTE: There were 1 observations read from the data set WORK.PHARM_CLASS.
NOTE: There were 1 observations read from the data set WORK.PHARM_SUBCLASS.
NOTE: There were 1 observations read from the data set 
      WORK.INGREDIENT_RXCUI.
NOTE: There were 1 observations read from the data set 
      WORK.INGREDIENT_RXCUI_NAME.
NOTE: There were 1 observations read from the data set WORK.SPECIFIC_RXCUI.
NOTE: There were 1 observations read from the data set 
      WORK.SPECIFIC_RXCUI_TYPE.
NOTE: There were 1 observations read from the data set WORK.GPI.
NOTE: There were 1 observations read from the data set WORK.ORDER_CLASS.
NOTE: There were 1 observations read from the data set WORK.ORDERING_MODE.
NOTE: There were 1 observations read from the data set WORK.ORDER_STATUS.
NOTE: There were 1 observations read from the data set WORK.FREQ_ID.
NOTE: There were 1 observations read from the data set WORK.FREQUENCY.
NOTE: There were 1 observations read from the data set WORK.ORDER_DOSE.
NOTE: There were 1 observations read from the data set WORK.ORDER_DOSE_UNIT.
NOTE: There were 1 observations read from the data set WORK.QUANTITY.
NOTE: There were 1 observations read from the data set WORK.PART_OF_MIX_YN.
NOTE: There were 1 observations read from the data set 
      WORK.MIX_INGREDIENT_TYPE.
NOTE: There were 1 observations read from the data set 
      WORK.MIX_PARENT_MEDICATION_NAME.
NOTE: There were 1 observations read from the data set WORK.AUTH_PROV_ID.
NOTE: There were 1 observations read from the data set WORK.AUTH_PROVIDER.
NOTE: There were 1 observations read from the data set 
      WORK.AUTH_PROVIDER_TYPE.
NOTE: There were 1 observations read from the data set WORK.AUTH_PROV_TITLE.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      

MPRINT(_DBLIB):   libname db postgres user = "rsparapani" password = 
"&password" server = "garth.ctsi.mcw.edu" database = 
"fh_jupyter_hub_hbdb" client_encoding = "utf-8" dbmax_text = 57 
sql_functions = all port=5432 ;
NOTE: Libref DB was successfully assigned as follows: 
      Engine:        POSTGRES 
      Physical Name: garth.ctsi.mcw.edu
3          
4          data mar_table;
13                             The SAS System  09:52 Saturday, March 8, 2025

5              set db.&dbdata(keep=patient_hash pharm_class pharm_subclass
6                  mar_route ingredient_rxcui_name mar_event_time_shifted);
7              where pharm_class='Antiarrhythmic' &
8                  '01JAN2017:00:00:00'dt<=mar_event_time_shifted<'01JAN2023
8        ! :00:00:00'dt;
9          run;

NOTE: There were 264793 observations read from the data set 
      DB.FH_HB_MAR_TABLE_JUPYTER.
      WHERE (pharm_class='Antiarrhythmic') and (mar_event_time_shifted>='  
      01JAN2017:00:00:00'DT and mar_event_time_shifted<'  
      01JAN2023:00:00:00'DT);
NOTE: The data set WORK.MAR_TABLE has 264793 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           25.38 seconds
      cpu time            1.58 seconds
      

10         
11         %_dbdata(out=mar_table);
NOTE: You have called the macro _DBDATA, 2025-02-20.
NOTE: Copyright (c) 2025 Rodney Sparapani
 
MPRINT(_DBDATA):  ;
NOTE: You have called the macro _BLIST, 2008-03-03.
NOTE: Copyright (c) 2004-2008 Rodney Sparapani
 
MPRINT(_DBDATA):   data mar_table;
MPRINT(_DBDATA):   length
MPRINT(_DBDATA):   patient_hash $ 16
MPRINT(_DBDATA):   mar_route $ 16
MPRINT(_DBDATA):   pharm_class $ 16
MPRINT(_DBDATA):   pharm_subclass $ 57
MPRINT(_DBDATA):   ingredient_rxcui_name $ 16
MPRINT(_DBDATA):  ;
MPRINT(_DBDATA):   set WORK.MAR_TABLE ;
MPRINT(_DBDATA):   format patient_hash mar_route pharm_class pharm_subclass 
ingredient_rxcui_name _numeric_;
MPRINT(_DBDATA):   informat patient_hash mar_route pharm_class 
pharm_subclass ingredient_rxcui_name _numeric_;
MPRINT(_DBDATA):   informat mar_event_time_shifted;
MPRINT(_DBDATA):   format mar_event_time date9. mar_event_time_shifted 
datetime19.;
MPRINT(_DBDATA):   mar_event_time=datepart(mar_event_time_shifted);
MPRINT(_DBDATA):   run;

WARNING: Multiple lengths were specified for the variable patient_hash by 
         input data set(s). This can cause truncation of data.
WARNING: Multiple lengths were specified for the variable mar_route by 
         input data set(s). This can cause truncation of data.
WARNING: Multiple lengths were specified for the variable pharm_class by 
         input data set(s). This can cause truncation of data.
14                             The SAS System  09:52 Saturday, March 8, 2025

WARNING: Multiple lengths were specified for the variable 
         ingredient_rxcui_name by input data set(s). This can cause 
         truncation of data.
NOTE: There were 264793 observations read from the data set WORK.MAR_TABLE.
NOTE: The data set WORK.MAR_TABLE has 264793 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.14 seconds
      cpu time            0.15 seconds
      

12         
13         %_sort(data=mar_table, out=mar_table, by=patient_hash
13       ! mar_event_time_shifted);
NOTE: You have called the macro _SORT, 2016-11-16
NOTE: Copyright (c) 2001-2016 Rodney Sparapani
 
MPRINT(_SORT):  ;
MPRINT(_SORT):   proc sort out=work.mar_table (sortedby=patient_hash 
mar_event_time_shifted) data=
MPRINT(_SORT):   work.mar_table (
MPRINT(_SORT):   );
NOTE: You have called the macro _BY, 2005-03-25.
NOTE: Copyright (c) 2001-2005 Rodney Sparapani
 
MPRINT(_SORT):   by
NOTE: You have called the macro _LIST, 2013-09-04.
NOTE: Copyright (c) 2001-2013 Rodney Sparapani
 
MPRINT(_BY):   PATIENT_HASH MAR_EVENT_TIME_SHIFTED
MPRINT(_SORT):  ;
MPRINT(_SORT):   run;

NOTE: There were 264793 observations read from the data set WORK.MAR_TABLE.
NOTE: The data set WORK.MAR_TABLE has 264793 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.11 seconds
      cpu time            0.25 seconds
      

14         
15         %_dblib(data=db.fh_hb_med_orders_table_jupyter,
15       ! var=pharm_subclass);
MPRINT(_DBLIB):  ;
MPRINT(_DBLIB):   proc sql;
MPRINT(_DBLIB):   connect to postgres as crdw (user=rsparapani 
password=&password server="garth.ctsi.mcw.edu" 
database="fh_jupyter_hub_hbdb");
MPRINT(_DBLIB):   create table schema as select * from connection to crdw 
(select * from information_schema.columns where table_schema = 'public') 
where table_name="fh_hb_med_orders_table_jupyter";
NOTE: Table WORK.SCHEMA created, with 32 rows and 44 columns.

15                             The SAS System  09:52 Saturday, March 8, 2025

MPRINT(_DBLIB):   disconnect from crdw;
MPRINT(_DBLIB):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.15 seconds
      cpu time            0.06 seconds
      

MPRINT(_DBLIB):   data dbdates;
MPRINT(_DBLIB):   set schema;
MPRINT(_DBLIB):   where data_type=:'time';
MPRINT(_DBLIB):   run;

NOTE: There were 1 observations read from the data set WORK.SCHEMA.
      WHERE data_type=:'time';
NOTE: The data set WORK.DBDATES has 1 observations and 44 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(_DBLIB):   data dblen;
MPRINT(_DBLIB):   set schema;
MPRINT(_DBLIB):   where data_type in:('character', 'text');
MPRINT(_DBLIB):   column_name=lowcase(column_name);
MPRINT(_DBLIB):   run;

NOTE: There were 27 observations read from the data set WORK.SCHEMA.
      WHERE data_type in: ('character', 'text');
NOTE: The data set WORK.DBLEN has 27 observations and 44 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data patient_hash;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.PATIENT_HASH has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.02 seconds
      

MPRINT(_DBLIB):   data encounter_hash;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ENCOUNTER_HASH has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
16                             The SAS System  09:52 Saturday, March 8, 2025

      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data order_med_id_hash;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ORDER_MED_ID_HASH has 1 observations and 1 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data medication_name;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.MEDICATION_NAME has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data pharm_class;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.PHARM_CLASS has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data pharm_subclass;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.PHARM_SUBCLASS has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data ingredient_rxcui;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
17                             The SAS System  09:52 Saturday, March 8, 2025

MPRINT(_DBLIB):   run;

NOTE: The data set WORK.INGREDIENT_RXCUI has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(_DBLIB):   data ingredient_rxcui_name;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.INGREDIENT_RXCUI_NAME has 1 observations and 1 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data specific_rxcui;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.SPECIFIC_RXCUI has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data specific_rxcui_type;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.SPECIFIC_RXCUI_TYPE has 1 observations and 1 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(_DBLIB):   data gpi;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.GPI has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
18                             The SAS System  09:52 Saturday, March 8, 2025

      

MPRINT(_DBLIB):   data order_class;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ORDER_CLASS has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data ordering_mode;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ORDERING_MODE has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data order_status;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ORDER_STATUS has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data order_route;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.ORDER_ROUTE has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data freq_id;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.FREQ_ID has 1 observations and 1 variables.
19                             The SAS System  09:52 Saturday, March 8, 2025

NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(_DBLIB):   data frequency;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.FREQUENCY has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data dose;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.DOSE has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data dose_unit;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.DOSE_UNIT has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data quantity;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.QUANTITY has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data part_of_mix_yn;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
20                             The SAS System  09:52 Saturday, March 8, 2025

MPRINT(_DBLIB):   run;

NOTE: The data set WORK.PART_OF_MIX_YN has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data mix_ingredient_type;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.MIX_INGREDIENT_TYPE has 1 observations and 1 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(_DBLIB):   data mix_parent_medication_name;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.MIX_PARENT_MEDICATION_NAME has 1 observations and 1 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data auth_prov_id;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.AUTH_PROV_ID has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data auth_provider;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.AUTH_PROVIDER has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
21                             The SAS System  09:52 Saturday, March 8, 2025

      

MPRINT(_DBLIB):   data auth_provider_type;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.AUTH_PROVIDER_TYPE has 1 observations and 1 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   data auth_prov_title;
MPRINT(_DBLIB):   len=16;
MPRINT(_DBLIB):   output;
MPRINT(_DBLIB):   run;

NOTE: The data set WORK.AUTH_PROV_TITLE has 1 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(_DBLIB):   proc sql;
MPRINT(_DBLIB):   connect to postgres as crdw (user=rsparapani 
password=&password server="garth.ctsi.mcw.edu" 
database="fh_jupyter_hub_hbdb");
MPRINT(_DBLIB):   create table pharm_subclass as select * from connection 
to crdw (select max(length(pharm_subclass)) as len from 
fh_hb_med_orders_table_jupyter);
NOTE: Table WORK.PHARM_SUBCLASS created, with 1 rows and 1 columns.

MPRINT(_DBLIB):   disconnect from crdw;
MPRINT(_DBLIB):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           13.53 seconds
      cpu time            0.03 seconds
      

MPRINT(_DBLIB):   data _null_;
MPRINT(_DBLIB):   set patient_hash encounter_hash order_med_id_hash 
medication_name pharm_class pharm_subclass ingredient_rxcui 
ingredient_rxcui_name specific_rxcui specific_rxcui_type gpi order_class 
ordering_mode order_status order_route freq_id frequency dose dose_unit 
quantity part_of_mix_yn mix_ingredient_type mix_parent_medication_name 
auth_prov_id auth_provider auth_provider_type auth_prov_title end=last;
MPRINT(_DBLIB):   retain dbmax_text 16;
MPRINT(_DBLIB):   dbmax_text=max(dbmax_text, len);
MPRINT(_DBLIB):   if last then call symput("dbmax_text", trim(dbmax_text));
MPRINT(_DBLIB):   run;
22                             The SAS System  09:52 Saturday, March 8, 2025


NOTE: Numeric values have been converted to character 
      values at the places given by: (Line):(Column).
      15:191   
NOTE: There were 1 observations read from the data set WORK.PATIENT_HASH.
NOTE: There were 1 observations read from the data set WORK.ENCOUNTER_HASH.
NOTE: There were 1 observations read from the data set 
      WORK.ORDER_MED_ID_HASH.
NOTE: There were 1 observations read from the data set WORK.MEDICATION_NAME.
NOTE: There were 1 observations read from the data set WORK.PHARM_CLASS.
NOTE: There were 1 observations read from the data set WORK.PHARM_SUBCLASS.
NOTE: There were 1 observations read from the data set 
      WORK.INGREDIENT_RXCUI.
NOTE: There were 1 observations read from the data set 
      WORK.INGREDIENT_RXCUI_NAME.
NOTE: There were 1 observations read from the data set WORK.SPECIFIC_RXCUI.
NOTE: There were 1 observations read from the data set 
      WORK.SPECIFIC_RXCUI_TYPE.
NOTE: There were 1 observations read from the data set WORK.GPI.
NOTE: There were 1 observations read from the data set WORK.ORDER_CLASS.
NOTE: There were 1 observations read from the data set WORK.ORDERING_MODE.
NOTE: There were 1 observations read from the data set WORK.ORDER_STATUS.
NOTE: There were 1 observations read from the data set WORK.ORDER_ROUTE.
NOTE: There were 1 observations read from the data set WORK.FREQ_ID.
NOTE: There were 1 observations read from the data set WORK.FREQUENCY.
NOTE: There were 1 observations read from the data set WORK.DOSE.
NOTE: There were 1 observations read from the data set WORK.DOSE_UNIT.
NOTE: There were 1 observations read from the data set WORK.QUANTITY.
NOTE: There were 1 observations read from the data set WORK.PART_OF_MIX_YN.
NOTE: There were 1 observations read from the data set 
      WORK.MIX_INGREDIENT_TYPE.
NOTE: There were 1 observations read from the data set 
      WORK.MIX_PARENT_MEDICATION_NAME.
NOTE: There were 1 observations read from the data set WORK.AUTH_PROV_ID.
NOTE: There were 1 observations read from the data set WORK.AUTH_PROVIDER.
NOTE: There were 1 observations read from the data set 
      WORK.AUTH_PROVIDER_TYPE.
NOTE: There were 1 observations read from the data set WORK.AUTH_PROV_TITLE.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.02 seconds
      

MPRINT(_DBLIB):   libname db postgres user = "rsparapani" password = 
"&password" server = "garth.ctsi.mcw.edu" database = 
"fh_jupyter_hub_hbdb" client_encoding = "utf-8" dbmax_text = 57 
sql_functions = all port=5432 ;
NOTE: Libref DB was successfully assigned as follows: 
      Engine:        POSTGRES 
      Physical Name: garth.ctsi.mcw.edu
16         
17         data med_orders;
23                             The SAS System  09:52 Saturday, March 8, 2025

18             set db.&dbdata(keep=patient_hash pharm_class pharm_subclass
19                 order_route ingredient_rxcui_name order_date_shifted);
20             where pharm_class='Antiarrhythmic' &
21                 '01JAN2017:00:00:00'dt<=order_date_shifted<'01JAN2023:00:
21       ! 00:00'dt;
22         run;

NOTE: There were 97084 observations read from the data set 
      DB.FH_HB_MED_ORDERS_TABLE_JUPYTER.
      WHERE (pharm_class='Antiarrhythmic') and (order_date_shifted>='  
      01JAN2017:00:00:00'DT and order_date_shifted<'  
      01JAN2023:00:00:00'DT);
NOTE: The data set WORK.MED_ORDERS has 97084 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           11.67 seconds
      cpu time            0.61 seconds
      

23         
24         %_dbdata(out=med_orders);
MPRINT(_DBDATA):  ;
MPRINT(_DBDATA):   data med_orders;
MPRINT(_DBDATA):   length
MPRINT(_DBDATA):   patient_hash $ 16
MPRINT(_DBDATA):   pharm_class $ 16
MPRINT(_DBDATA):   pharm_subclass $ 57
MPRINT(_DBDATA):   ingredient_rxcui_name $ 16
MPRINT(_DBDATA):   patient_hash $ 16
MPRINT(_DBDATA):   pharm_class $ 16
MPRINT(_DBDATA):   pharm_subclass $ 57
MPRINT(_DBDATA):   ingredient_rxcui_name $ 16
MPRINT(_DBDATA):   order_route $ 16
MPRINT(_DBDATA):  ;
MPRINT(_DBDATA):   set WORK.MED_ORDERS ;
MPRINT(_DBDATA):   format patient_hash pharm_class pharm_subclass 
ingredient_rxcui_name patient_hash pharm_class pharm_subclass 
ingredient_rxcui_name order_route _numeric_;
MPRINT(_DBDATA):   informat patient_hash pharm_class pharm_subclass 
ingredient_rxcui_name patient_hash pharm_class pharm_subclass 
ingredient_rxcui_name order_route _numeric_;
MPRINT(_DBDATA):   informat order_date_shifted;
MPRINT(_DBDATA):   format order_date date9. order_date_shifted datetime19.;
MPRINT(_DBDATA):   order_date=datepart(order_date_shifted);
MPRINT(_DBDATA):   run;

WARNING: Multiple lengths were specified for the variable patient_hash by 
         input data set(s). This can cause truncation of data.
WARNING: Multiple lengths were specified for the variable pharm_class by 
         input data set(s). This can cause truncation of data.
WARNING: Multiple lengths were specified for the variable 
         ingredient_rxcui_name by input data set(s). This can cause 
         truncation of data.
24                             The SAS System  09:52 Saturday, March 8, 2025

WARNING: Multiple lengths were specified for the variable order_route by 
         input data set(s). This can cause truncation of data.
NOTE: There were 97084 observations read from the data set WORK.MED_ORDERS.
NOTE: The data set WORK.MED_ORDERS has 97084 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.10 seconds
      

25         
26         %_sort(data=med_orders, out=med_orders, by=patient_hash
26       ! order_date_shifted);
MPRINT(_SORT):  ;
MPRINT(_SORT):   proc sort out=work.med_orders (sortedby=patient_hash 
order_date_shifted) data=
MPRINT(_SORT):   work.med_orders (
MPRINT(_SORT):   );
MPRINT(_SORT):   by
MPRINT(_BY):   PATIENT_HASH ORDER_DATE_SHIFTED
MPRINT(_SORT):  ;
MPRINT(_SORT):   run;

NOTE: There were 97084 observations read from the data set WORK.MED_ORDERS.
NOTE: The data set WORK.MED_ORDERS has 97084 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.07 seconds
      cpu time            0.08 seconds
      

27         
28         data aad;
29             set mar_table
30                 med_orders(rename=(order_route=mar_route
31                 order_date_shifted=mar_event_time_shifted
32                 order_date=mar_event_time));
33             by patient_hash mar_event_time_shifted;
34         run;

NOTE: There were 264793 observations read from the data set WORK.MAR_TABLE.
NOTE: There were 97084 observations read from the data set WORK.MED_ORDERS.
NOTE: The data set WORK.AAD has 361877 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.15 seconds
      cpu time            0.16 seconds
      

35         
36         data crdw.aad;
37             length patient_hash $ 16;
38             set aad;
39             by patient_hash;
40         
25                             The SAS System  09:52 Saturday, March 8, 2025

41             aad=0; amio=0; type1a=0; type1b=0; type1c=0; type3=0; misc=0;
42         
43             array __aad(2017:2022) aad17-aad22;
44             array __amio(2017:2022) amio17-amio22;
45             array __type1a(2017:2022) type1a17-type1a22;
46             array __type1b(2017:2022) type1b17-type1b22;
47             array __type1c(2017:2022) type1c17-type1c22;
48             array __type3(2017:2022) type317-type322;
49             array __misc(2017:2022) misc17-misc22;
50         
51             array _aad(2017:2022, 12)
52                 aad1701-aad1712 aad1801-aad1812 aad1901-aad1912
53                 aad2001-aad2012 aad2101-aad2112 aad2201-aad2212;
54             array _amio(2017:2022, 12)
55                 amio1701-amio1712 amio1801-amio1812 amio1901-amio1912
56                 amio2001-amio2012 amio2101-amio2112 amio2201-amio2212;
57             array _type1a(2017:2022, 12)
58                 type1a1701-type1a1712 type1a1801-type1a1812
58       ! type1a1901-type1a1912
59                 type1a2001-type1a2012 type1a2101-type1a2112
59       ! type1a2201-type1a2212;
60             array _type1b(2017:2022, 12)
61                 type1b1701-type1b1712 type1b1801-type1b1812
61       ! type1b1901-type1b1912
62                 type1b2001-type1b2012 type1b2101-type1b2112
62       ! type1b2201-type1b2212;
63             array _type1c(2017:2022, 12)
64                 type1c1701-type1c1712 type1c1801-type1c1812
64       ! type1c1901-type1c1912
65                 type1c2001-type1c2012 type1c2101-type1c2112
65       ! type1c2201-type1c2212;
66             array _type3(2017:2022, 12)
67                 type31701-type31712 type31801-type31812
67       ! type31901-type31912
68                 type32001-type32012 type32101-type32112
68       ! type32201-type32212;
69             array _misc(2017:2022, 12)
70                 misc1701-misc1712 misc1801-misc1812 misc1901-misc1912
71                 misc2001-misc2012 misc2101-misc2112 misc2201-misc2212;
72         
73             keep patient_hash aad amio type1a type1b type1c type3 misc
74                 aad17-aad22 amio17-amio22 type1a17-type1a22
74       ! type1b17-type1b22
75                 type1c17-type1c22 type317-type322 misc17-misc22
76                 aad1701-aad1712 aad1801-aad1812 aad1901-aad1912
77                 aad2001-aad2012 aad2101-aad2112 aad2201-aad2212
78                 amio1701--amio1712 amio1801--amio1812 amio1901--amio1912
79                 amio2001--amio2012 amio2101--amio2112 amio2201--amio2212
80                 type1a1701--type1a1712 type1a1801--type1a1812
80       ! type1a1901--type1a1912
81                 type1a2001--type1a2012 type1a2101--type1a2112
81       ! type1a2201--type1a2212
26                             The SAS System  09:52 Saturday, March 8, 2025

82                 type1b1701--type1b1712 type1b1801--type1b1812
82       ! type1b1901--type1b1912
83                 type1b2001--type1b2012 type1b2101--type1b2112
83       ! type1b2201--type1b2212
84                 type1c1701--type1c1712 type1c1801--type1c1812
84       ! type1c1901--type1c1912
85                 type1c2001--type1c2012 type1c2101--type1c2112
85       ! type1c2201--type1c2212
86                 type31701--type31712 type31801--type31812
86       ! type31901--type31912
87                 type32001--type32012 type32101--type32112
87       ! type32201--type32212
88                 misc1701--misc1712 misc1801--misc1812 misc1901--misc1912
89                 misc2001--misc2012 misc2101--misc2112 misc2201--misc2212;
90         
91             %_retain(default=0, by=patient_hash, var=
NOTE: You have called the macro _RETAIN, 2017-02-28.
NOTE: Copyright (c) 2001-2017 Rodney Sparapani
 
92                 aad1701--aad1712 aad1801--aad1812 aad1901--aad1912
93                 aad2001--aad2012 aad2101--aad2112 aad2201--aad2212
94                 amio1701--amio1712 amio1801--amio1812 amio1901--amio1912
95                 amio2001--amio2012 amio2101--amio2112 amio2201--amio2212
96                 type1a1701--type1a1712 type1a1801--type1a1812
96       ! type1a1901--type1a1912
97                 type1a2001--type1a2012 type1a2101--type1a2112
97       ! type1a2201--type1a2212
98                 type1b1701--type1b1712 type1b1801--type1b1812
98       ! type1b1901--type1b1912
99                 type1b2001--type1b2012 type1b2101--type1b2112
99       ! type1b2201--type1b2212
100                type1c1701--type1c1712 type1c1801--type1c1812
100      ! type1c1901--type1c1912
101                type1c2001--type1c2012 type1c2101--type1c2112
101      ! type1c2201--type1c2212
102                type31701--type31712 type31801--type31812
102      ! type31901--type31912
103                type32001--type32012 type32101--type32112
103      ! type32201--type32212
104                misc1701--misc1712 misc1801--misc1812 misc1901--misc1912
105                misc2001--misc2012 misc2101--misc2112 misc2201--misc2212
106                );
MPRINT(_RETAIN):  ;
MPRINT(_RETAIN):   retain aad1701--aad1712
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain aad1801--aad1812
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain aad1901--aad1912
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain aad2001--aad2012
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain aad2101--aad2112
27                             The SAS System  09:52 Saturday, March 8, 2025

MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain aad2201--aad2212
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain amio1701--amio1712
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain amio1801--amio1812
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain amio1901--amio1912
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain amio2001--amio2012
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain amio2101--amio2112
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain amio2201--amio2212
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1a1701--type1a1712
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1a1801--type1a1812
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1a1901--type1a1912
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1a2001--type1a2012
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1a2101--type1a2112
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1a2201--type1a2212
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1b1701--type1b1712
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1b1801--type1b1812
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1b1901--type1b1912
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1b2001--type1b2012
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1b2101--type1b2112
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1b2201--type1b2212
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1c1701--type1c1712
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1c1801--type1c1812
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1c1901--type1c1912
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1c2001--type1c2012
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1c2101--type1c2112
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type1c2201--type1c2212
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type31701--type31712
28                             The SAS System  09:52 Saturday, March 8, 2025

MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type31801--type31812
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type31901--type31912
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type32001--type32012
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type32101--type32112
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain type32201--type32212
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain misc1701--misc1712
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain misc1801--misc1812
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain misc1901--misc1912
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain misc2001--misc2012
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain misc2101--misc2112
MPRINT(_RETAIN):   0 ;
MPRINT(_RETAIN):   retain misc2201--misc2212
MPRINT(_RETAIN):   0 ;
NOTE: You have called the macro _FIRST, 2004-03-30.
NOTE: Copyright (c) 2001-2004 Rodney Sparapani
 
MPRINT(_RETAIN):   if
MPRINT(_FIRST):   (first.PATIENT_HASH)
MPRINT(_RETAIN):   then do;
MPRINT(_RETAIN):   array _11(*) aad1701--aad1712;
MPRINT(_RETAIN):   do _i_=1 to hbound(_11);
MPRINT(_RETAIN):   _11(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _21(*) aad1801--aad1812;
MPRINT(_RETAIN):   do _i_=1 to hbound(_21);
MPRINT(_RETAIN):   _21(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _31(*) aad1901--aad1912;
MPRINT(_RETAIN):   do _i_=1 to hbound(_31);
MPRINT(_RETAIN):   _31(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _41(*) aad2001--aad2012;
MPRINT(_RETAIN):   do _i_=1 to hbound(_41);
MPRINT(_RETAIN):   _41(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _51(*) aad2101--aad2112;
MPRINT(_RETAIN):   do _i_=1 to hbound(_51);
MPRINT(_RETAIN):   _51(_i_)=0;
29                             The SAS System  09:52 Saturday, March 8, 2025

MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _61(*) aad2201--aad2212;
MPRINT(_RETAIN):   do _i_=1 to hbound(_61);
MPRINT(_RETAIN):   _61(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _71(*) amio1701--amio1712;
MPRINT(_RETAIN):   do _i_=1 to hbound(_71);
MPRINT(_RETAIN):   _71(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _81(*) amio1801--amio1812;
MPRINT(_RETAIN):   do _i_=1 to hbound(_81);
MPRINT(_RETAIN):   _81(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _91(*) amio1901--amio1912;
MPRINT(_RETAIN):   do _i_=1 to hbound(_91);
MPRINT(_RETAIN):   _91(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _101(*) amio2001--amio2012;
MPRINT(_RETAIN):   do _i_=1 to hbound(_101);
MPRINT(_RETAIN):   _101(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _111(*) amio2101--amio2112;
MPRINT(_RETAIN):   do _i_=1 to hbound(_111);
MPRINT(_RETAIN):   _111(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _121(*) amio2201--amio2212;
MPRINT(_RETAIN):   do _i_=1 to hbound(_121);
MPRINT(_RETAIN):   _121(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _131(*) type1a1701--type1a1712;
MPRINT(_RETAIN):   do _i_=1 to hbound(_131);
MPRINT(_RETAIN):   _131(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _141(*) type1a1801--type1a1812;
MPRINT(_RETAIN):   do _i_=1 to hbound(_141);
MPRINT(_RETAIN):   _141(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _151(*) type1a1901--type1a1912;
MPRINT(_RETAIN):   do _i_=1 to hbound(_151);
MPRINT(_RETAIN):   _151(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
30                             The SAS System  09:52 Saturday, March 8, 2025

MPRINT(_RETAIN):   array _161(*) type1a2001--type1a2012;
MPRINT(_RETAIN):   do _i_=1 to hbound(_161);
MPRINT(_RETAIN):   _161(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _171(*) type1a2101--type1a2112;
MPRINT(_RETAIN):   do _i_=1 to hbound(_171);
MPRINT(_RETAIN):   _171(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _181(*) type1a2201--type1a2212;
MPRINT(_RETAIN):   do _i_=1 to hbound(_181);
MPRINT(_RETAIN):   _181(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _191(*) type1b1701--type1b1712;
MPRINT(_RETAIN):   do _i_=1 to hbound(_191);
MPRINT(_RETAIN):   _191(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _201(*) type1b1801--type1b1812;
MPRINT(_RETAIN):   do _i_=1 to hbound(_201);
MPRINT(_RETAIN):   _201(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _211(*) type1b1901--type1b1912;
MPRINT(_RETAIN):   do _i_=1 to hbound(_211);
MPRINT(_RETAIN):   _211(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _221(*) type1b2001--type1b2012;
MPRINT(_RETAIN):   do _i_=1 to hbound(_221);
MPRINT(_RETAIN):   _221(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _231(*) type1b2101--type1b2112;
MPRINT(_RETAIN):   do _i_=1 to hbound(_231);
MPRINT(_RETAIN):   _231(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _241(*) type1b2201--type1b2212;
MPRINT(_RETAIN):   do _i_=1 to hbound(_241);
MPRINT(_RETAIN):   _241(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _251(*) type1c1701--type1c1712;
MPRINT(_RETAIN):   do _i_=1 to hbound(_251);
MPRINT(_RETAIN):   _251(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _261(*) type1c1801--type1c1812;
MPRINT(_RETAIN):   do _i_=1 to hbound(_261);
31                             The SAS System  09:52 Saturday, March 8, 2025

MPRINT(_RETAIN):   _261(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _271(*) type1c1901--type1c1912;
MPRINT(_RETAIN):   do _i_=1 to hbound(_271);
MPRINT(_RETAIN):   _271(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _281(*) type1c2001--type1c2012;
MPRINT(_RETAIN):   do _i_=1 to hbound(_281);
MPRINT(_RETAIN):   _281(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _291(*) type1c2101--type1c2112;
MPRINT(_RETAIN):   do _i_=1 to hbound(_291);
MPRINT(_RETAIN):   _291(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _301(*) type1c2201--type1c2212;
MPRINT(_RETAIN):   do _i_=1 to hbound(_301);
MPRINT(_RETAIN):   _301(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _311(*) type31701--type31712;
MPRINT(_RETAIN):   do _i_=1 to hbound(_311);
MPRINT(_RETAIN):   _311(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _321(*) type31801--type31812;
MPRINT(_RETAIN):   do _i_=1 to hbound(_321);
MPRINT(_RETAIN):   _321(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _331(*) type31901--type31912;
MPRINT(_RETAIN):   do _i_=1 to hbound(_331);
MPRINT(_RETAIN):   _331(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _341(*) type32001--type32012;
MPRINT(_RETAIN):   do _i_=1 to hbound(_341);
MPRINT(_RETAIN):   _341(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _351(*) type32101--type32112;
MPRINT(_RETAIN):   do _i_=1 to hbound(_351);
MPRINT(_RETAIN):   _351(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _361(*) type32201--type32212;
MPRINT(_RETAIN):   do _i_=1 to hbound(_361);
MPRINT(_RETAIN):   _361(_i_)=0;
MPRINT(_RETAIN):   end;
32                             The SAS System  09:52 Saturday, March 8, 2025

MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _371(*) misc1701--misc1712;
MPRINT(_RETAIN):   do _i_=1 to hbound(_371);
MPRINT(_RETAIN):   _371(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _381(*) misc1801--misc1812;
MPRINT(_RETAIN):   do _i_=1 to hbound(_381);
MPRINT(_RETAIN):   _381(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _391(*) misc1901--misc1912;
MPRINT(_RETAIN):   do _i_=1 to hbound(_391);
MPRINT(_RETAIN):   _391(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _401(*) misc2001--misc2012;
MPRINT(_RETAIN):   do _i_=1 to hbound(_401);
MPRINT(_RETAIN):   _401(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _411(*) misc2101--misc2112;
MPRINT(_RETAIN):   do _i_=1 to hbound(_411);
MPRINT(_RETAIN):   _411(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   array _421(*) misc2201--misc2212;
MPRINT(_RETAIN):   do _i_=1 to hbound(_421);
MPRINT(_RETAIN):   _421(_i_)=0;
MPRINT(_RETAIN):   end;
MPRINT(_RETAIN):   drop _i_;
MPRINT(_RETAIN):   end
107        
108            month=month(mar_event_time);
109            year =year(mar_event_time);
110        
111            select;
112            when(ingredient_rxcui_name='amiodarone')
113                _amio(year, month)+1;
114            when(pharm_subclass='Antiarrhythmics - Misc.')
115                _misc(year, month)+1;
116            when(pharm_subclass='Antiarrhythmics Type I-A')
117                _type1a(year, month)+1;
118            when(pharm_subclass='Antiarrhythmics Type I-B')
119                _type1b(year, month)+1;
120            when(pharm_subclass='Antiarrhythmics Type I-C')
121                _type1c(year, month)+1;
122            when(pharm_subclass='Antiarrhythmics Type III')
123                _type3(year, month)+1;
124            otherwise;
125            end;
126        
33                             The SAS System  09:52 Saturday, March 8, 2025

127            if last.patient_hash;
128        
129            do year=2017 to 2022;
130                __aad(year)=0;
131                __amio(year)=0;
132                __type1a(year)=0;
133                __type1b(year)=0;
134                __type1c(year)=0;
135                __type3(year)=0;
136                __misc(year)=0;
137        
138                do month=1 to 12;
139                _aad(year, month)=_amio(year, month)+_misc(year, month)+
140                _type1a(year, month)+_type1b(year, month)+_type1c(year,
140      ! month)+
141                _type3(year, month);
142                __aad(year)  =__aad(year)+(_aad(year, month)>0);
143                __amio(year)  =__amio(year)+(_amio(year, month)>0);
144                __type1a(year)=__type1a(year)+(_type1a(year, month)>0);
145                __type1b(year)=__type1b(year)+(_type1b(year, month)>0);
146                __type1c(year)=__type1c(year)+(_type1c(year, month)>0);
147                __type3(year) =__type3(year)+(_type3(year, month)>0);
148                __misc(year)  =__misc(year)+(_misc(year, month)>0);
149                end;
150        
151                aad=aad+(__aad(year));
152                amio=amio+(__amio(year));
153                type1a=type1a+(__type1a(year));
154                type1b=type1b+(__type1b(year));
155                type1c=type1c+(__type1c(year));
156                type3=type3+(__type3(year));
157                misc=misc+(__misc(year));
158            end;
159        run;

NOTE: There were 361877 observations read from the data set WORK.AAD.
NOTE: The data set CRDW.AAD has 21957 observations and 554 variables.
NOTE: DATA statement used (Total process time):
      real time           1.30 seconds
      cpu time            1.29 seconds
      

160        
161        proc freq;
162            tables aad amio type1a type1b type1c type3 misc;
163        run;

NOTE: There were 21957 observations read from the data set CRDW.AAD.
NOTE: The PROCEDURE FREQ printed pages 1-5.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
34                             The SAS System  09:52 Saturday, March 8, 2025

      

164        
165        proc contents varnum;
166        run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      
NOTE: The PROCEDURE CONTENTS printed pages 6-19.

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           1:21.63
      cpu time            5.16 seconds
      
